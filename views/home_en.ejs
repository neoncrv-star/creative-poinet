<% const isEn = true; %>
<%- include('partials/header', { isEn: isEn }) %>

<link rel="preload" href="/css/hero.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/journey.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/services-stacked.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/portfolio-slider.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
    <link rel="stylesheet" href="/css/hero.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/journey.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/services-stacked.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/portfolio-slider.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
</noscript>

<style>
    :root {
        --service-overlay-opacity: <%= (globalSeo && globalSeo.serviceOverlayOpacity !== undefined) ? globalSeo.serviceOverlayOpacity : 0.8 %>;
        --service-image-brightness: <%= (globalSeo && globalSeo.serviceImageBrightness !== undefined) ? globalSeo.serviceImageBrightness : 0.5 %>;
        --slider-height: <%= (globalSeo && globalSeo.sliderHeight) ? globalSeo.sliderHeight : '500px' %>;
    }
     
    .portfolio-swiper {
        height: var(--slider-height) !important;
    } 
    
    .project-card {
        height: 100% !important;
    }
 
    .project-card img, .project-card video {
        height: 100% !important;
        object-fit: cover !important;
    }

</style>

<main>
        <!-- =========================
             Sticky Mask Hero Section
        ========================== -->
        <section class="hero-sticky-section">
            <div class="hero-sticky-wrapper">
                
                <!-- The Mask/Reveal Container -->
                <div class="hero-mask-container">
                    <div class="hero-video-wrapper">
                        <%
                        var defaultHeroEn = 'https://cdn.coverr.co/videos/coverr-red-smoke-5374/1080p.mp4';
                        var modeEn = seo && seo.heroVideoMode ? seo.heroVideoMode.toLowerCase() : 'url';
                        var rawUrlEn = seo && seo.heroVideoUrl ? seo.heroVideoUrl.trim() : '';
                        var fileValEn = seo && seo.heroVideoFile ? seo.heroVideoFile : '';
                        var heroTypeEn = 'video';
                        var heroSrcEn = '';
                        var heroEmbedEn = '';
                        var ytMatchEn = rawUrlEn ? rawUrlEn.match(/(?:v=|youtu\.be\/|embed\/)([A-Za-z0-9_-]{6,})/) : null;
                        var vMatchEn = rawUrlEn ? rawUrlEn.match(/vimeo\.com\/(\d+)/) : null;
                        if (modeEn === 'file' && fileValEn) {
                            heroTypeEn = 'video';
                            heroSrcEn = assetPath(fileValEn);
                        } else if ((modeEn === 'youtube' || (modeEn === 'url' && ytMatchEn && ytMatchEn[1])) && rawUrlEn) {
                            var ytIdEn = ytMatchEn && ytMatchEn[1] ? ytMatchEn[1] : null;
                            if (ytIdEn) {
                                heroTypeEn = 'embed';
                                heroEmbedEn = 'https://www.youtube.com/embed/' + ytIdEn + '?autoplay=1&mute=1&controls=0&loop=1&playlist=' + ytIdEn + '&showinfo=0&rel=0&modestbranding=1&playsinline=1';
                            }
                        } else if ((modeEn === 'vimeo' || (modeEn === 'url' && vMatchEn && vMatchEn[1])) && rawUrlEn) {
                            var vIdEn = vMatchEn && vMatchEn[1] ? vMatchEn[1] : null;
                            if (vIdEn) {
                                heroTypeEn = 'embed';
                                heroEmbedEn = 'https://player.vimeo.com/video/' + vIdEn + '?autoplay=1&muted=1&background=1&loop=1&title=0&byline=0&portrait=0';
                            }
                        } else if (rawUrlEn) {
                            heroTypeEn = 'video';
                            heroSrcEn = rawUrlEn;
                        }
                        if (!heroSrcEn && !heroEmbedEn) {
                            heroTypeEn = 'video';
                            heroSrcEn = defaultHeroEn;
                        }
                        %>
                        <% if (heroTypeEn === 'embed') { %>
                            <iframe class="hero-video hero-video-embed" src="<%= heroEmbedEn %>" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                        <% } else { %>
                            <video class="hero-video" playsinline muted loop autoplay preload="metadata" poster="/210.png">
                                <source src="<%= heroSrcEn %>" type="video/mp4">
                            </video>
                        <% } %>
                        <div class="hero-video-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 2;"></div>
                    </div>
                    
                    <!-- Content revealed inside the video -->
                    <div class="hero-content-overlay">
                        <h1 class="hero-title">Every Creativity Starts <br> With a Point</h1>
                        <p class="hero-subtitle">
                            This slogan goes beyond summarizing our vision-it embodies our practical and strategic mindset at Creative Point.
                        </p>
                        <a href="#journey" class="hero-btn">Explore</a>
                    </div>
                </div>

                <!-- Initial Elements (Visible before scroll) -->
                <div class="hero-initial-point">
                    <div class="dots-wrapper">
                        <div class="point-dot-white"></div>
                        <div class="point-dot-red"></div>
                    </div>
                    <div class="hero-initial-text">The Point</div>
                </div>

                <div class="scroll-mouse-icon">
                    <div class="mouse-shape">
                        <div class="mouse-wheel"></div>
                    </div>
                    <span class="scroll-text">Scroll</span>
                </div>
                
            </div>
        </section>

        <% if (typeof stats !== 'undefined' && stats && stats.length) { %>
        <section class="stats-section">
            <div class="stats-wrapper">
                <% stats.forEach(function(stat) { %>
                    <article class="stat-item">
                        <div class="stat-value">
                            <span class="stat-number" data-target="<%= stat.value %>">0</span>
                            <% if (stat.suffix_en) { %>
                                <span class="stat-suffix"><%= stat.suffix_en %></span>
                            <% } %>
                        </div>
                        <p class="stat-label"><%= stat.label_en %></p>
                    </article>
                <% }); %>
            </div>
        </section>
        <% } %>

        <section id="journey" class="journey-scroll-section">
            <div class="journey-container" style="text-align: center;">
                <p class="journey-eyebrow" style="text-align: center;">Creative Point Agency</p>
                <div class="journey-text-content" style="text-align: center;">
                    <span class="journey-line">A full-service creative and marketing agency</span>
                    <span class="journey-line">Built around one clear idea before any execution begins</span>
                    <span class="journey-line">In a world crowded with visual and advertising noise</span>
                    <span class="journey-line">We don't start with decoration</span>
                    <span class="journey-line">We start with a smart, unified strategic decision</span>
                    <span class="journey-line">From this point, we bring creativity back to its true essence</span>
                    <span class="journey-line">A solid visual identity</span>
                    <span class="journey-line">Professional design solutions</span>
                    <span class="journey-line">And high-quality exhibition and conference setups</span>
                </div>
            </div>
        </section>

        <section id="services" class="services-stacked-section">
            <div class="services-stacked-wrapper">
                <div class="services-stacked-header">
                    <p class="services-stacked-eyebrow">Services</p>
                    <h2 class="services-stacked-title">Stacked solutions from strategy to execution</h2>
                    <p class="services-stacked-subtitle">
                        Each service represents a clear point in the journey, building on the previous
                        one to form a complete creative system that stays consistent across all touchpoints.
                    </p>
                </div>

                <% var servicesList = (typeof services !== 'undefined' && services) ? services : []; %>
                <% if (servicesList.length) { %>
                    <div class="services-stacked-cards">
                        <% servicesList.forEach(function(service, index) { %>
                            <article class="service-stacked-card" style="--card-index:<%= index %>;">
                                <div class="service-stacked-inner">
                                    <div class="service-stacked-copy">
                                        <div>
                                            <div class="service-stacked-topline">
                                                <span class="service-stacked-label">Service</span>
                                                <span class="service-stacked-index">
                                                    <%= (index + 1).toString().padStart(2, '0') %>
                                                </span>
                                            </div>
                                            <h3 class="service-stacked-heading">
                                                <%= service.title_en || service.title_ar || '' %>
                                            </h3>
                                            <p class="service-stacked-text">
                                                <%= service.description_en || service.description_ar || '' %>
                                            </p>
                                            <ul class="service-stacked-tags">
                                                <% if (service.tag1_en || service.tag1_ar) { %>
                                                    <li class="service-stacked-tag"><%= service.tag1_en || service.tag1_ar %></li>
                                                <% } %>
                                                <% if (service.tag2_en || service.tag2_ar) { %>
                                                    <li class="service-stacked-tag"><%= service.tag2_en || service.tag2_ar %></li>
                                                <% } %>
                                                <% if (service.tag3_en || service.tag3_ar) { %>
                                                    <li class="service-stacked-tag"><%= service.tag3_en || service.tag3_ar %></li>
                                                <% } %>
                                            </ul>
                                        </div>
                                        <div class="service-stacked-meta">
                                            <span>From clear idea to tangible implementation</span>
                                            <span class="service-stacked-meta-dot"></span>
                                        </div>
                                    </div>
                                    <div class="service-stacked-media">
                                        <div class="service-stacked-image-frame">
                                            <% if (service.image) { %>
                                                <img class="service-stacked-image" src="<%= assetPath(service.image) %>" alt="<%= service.title_en || service.title_ar || '' %>" loading="lazy" decoding="async">
                                            <% } else { %>
                                                <div class="service-stacked-image-placeholder"></div>
                                            <% } %>
                                            <div class="service-stacked-image-overlay"></div>
                                            <div class="service-stacked-image-grain"></div>
                                        </div>
                                    </div>
                                </div>
                            </article>
                        <% }) %>
                    </div>
                <% } else { %>
                    <div class="services-stacked-empty">
                        <h3>No services added yet</h3>
                        <p>Once you add services from the dashboard, they will appear here as stacked sticky cards.</p>
                    </div>
                <% } %>
            </div>
        </section>

        <!-- Portfolio Slider Section -->
        <section id="portfolio" class="portfolio-section">
            <div class="container">
                <div class="portfolio-header" data-gsap="fade-up" style="text-align: center;">
                    <h2 class="portfolio-title">Latest Projects</h2>
                    <p style="text-align: center;">Turning ideas into reality... Explore our work</p>
                </div>

                <div class="portfolio-container" data-gsap="fade-up">
                    <button class="portfolio-nav-btn prev-btn">
                        <i class="ri-arrow-left-line"></i>
                    </button>
                    <button class="portfolio-nav-btn next-btn">
                        <i class="ri-arrow-right-line"></i>
                    </button>

                    <div class="swiper portfolio-swiper">
                        <div class="swiper-wrapper">
                            <% if (projects && projects.length > 0) { %>
                                <% projects.forEach(project => { %>
                                    <div class="swiper-slide">
                                        <div class="project-card">
                                            <% if (project.image && (project.image.endsWith('.mp4') || project.image.endsWith('.webm'))) { %>
                                                <video src="<%= assetPath(project.image) %>" muted loop playsinline></video>
                                            <% } else if (project.image) { %>
                                            <img src="<%= assetPath(project.image) %>" alt="<%= project.title_en || project.title %>" width="1200" height="800" loading="lazy" decoding="async">
                                            <% } else { %>
                                            <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Project Placeholder" width="800" height="600" loading="lazy" decoding="async">
                                            <% } %>
                                            
                                            <div class="project-overlay">
                                                <div class="project-info">
                                                    <h3><%= project.title_en || project.title %></h3>
                                                    <p><%= project.description_en || project.description %></p>
                                                    <a href="<%= project.externalLink || '/portfolio/' + project.id %>" class="project-link" <%= project.externalLink ? 'target="_blank"' : '' %>>
                                                        <span>View Project</span>
                                                        <i class="ri-arrow-right-line"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% }); %>
                            <% } else { %>
                                <!-- Fallback static projects -->
                                <% for(let i=1; i<=6; i++) { %>
                                    <div class="swiper-slide">
                                        <div class="project-card">
                                            <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Project <%= i %>">
                                            <div class="project-overlay">
                                                <div class="project-info">
                                                    <h3>Creative Project <%= i %></h3>
                                                    <p>Short description of the project and how we helped the client.</p>
                                                    <a href="#" class="project-link">
                                                        <span>View Project</span>
                                                        <i class="ri-arrow-right-line"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% } %>
                            <% } %>
                        </div>
                        <!-- Add Pagination -->
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Partners Section -->
        <section id="partners" class="partners-section">
            <div class="container">
                <div class="partners-header" data-gsap="fade-up">
                    <h2 class="partners-title">We take pride in our work and are even more proud of the partnerships we've established.</h2>
                </div>
                <div class="partners-grid">
                    <% if (partners && partners.length > 0) { %>
                        <% partners.forEach(partner => { %>
                            <div class="partner-item" data-gsap="fade-up">
                                <img src="<%= assetPath(partner.logo || '') %>" alt="<%= partner.name %>" title="<%= partner.name %>" loading="lazy" decoding="async" width="200" height="80">
                            </div>
                        <% }) %>
                    <% } else { %>
                        <div class="partner-item" data-gsap="fade-up">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Saudi_Aramco_logo.svg/1200px-Saudi_Aramco_logo.svg.png" alt="Saudi Aramco" loading="lazy" decoding="async" width="200" height="80">
                        </div>
                        <div class="partner-item" data-gsap="fade-up">
                            <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/8/82/Misk_Foundation_logo.svg/1200px-Misk_Foundation_logo.svg.png" alt="Misk" loading="lazy" decoding="async" width="200" height="80">
                        </div>
                        <div class="partner-item" data-gsap="fade-up">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/ROSHN_Logo.svg/1200px-ROSHN_Logo.svg.png" alt="ROSHN" loading="lazy" decoding="async" width="200" height="80">
                        </div>
                        <div class="partner-item" data-gsap="fade-up">
                            <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/e/e0/Diriyah_Gate_Development_Authority_logo.svg/1200px-Diriyah_Gate_Development_Authority_logo.svg.png" alt="DGDA" loading="lazy" decoding="async" width="200" height="80">
                        </div>
                    <% } %>
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="blog" class="blog-home-section">
            <div class="container">
                <div class="blog-section-inner" data-gsap="fade-up">
                    <div class="section-header" style="text-align: center; margin-bottom: 3rem;">
                        <h2 class="section-title" style="font-size: 2.5rem; margin-bottom: 1rem;">Latest Articles</h2>
                        <p style="color: #888; font-size: 1.1rem;">Insights and thoughts in the world of design and technology</p>
                    </div>
                    
                    <div class="blog-grid">
                        <% if (posts && posts.length > 0) { %>
                            <% posts.forEach(post => { %>
                                <article class="blog-card">
                                    <% if (post.image) { %>
                                        <div class="blog-image">
                                            <img src="<%= assetPath(post.image) %>" alt="<%= post.title %>">
                                        </div>
                                    <% } %>
                                    <div class="blog-content">
                                        <span class="blog-date"><%= post.date %></span>
                                        <h3><%= post.title %></h3>
                                        <p class="blog-excerpt"><%= post.excerpt %></p>
                                        <a href="/blog/<%= post.id %>" class="read-more">
                                            <span>Read More</span>
                                            <i class="ri-arrow-right-line"></i>
                                        </a>
                                    </div>
                                </article>
                            <% }) %>
                        <% } else { %>
                            <div style="grid-column: 1/-1; text-align: center; padding: 50px; background: #0a0a0a; border-radius: 20px; border: 1px solid #1a1a1a;">
                                <p style="color: #666;">No articles available at the moment.</p>
                            </div>
                        <% } %>
                    </div>
                    
                    <div class="view-all-container">
                        <a href="/blog" class="view-all-btn">View All Articles</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="marquee-wrapper contact-marquee">
                <div class="marquee-content">
                    <h1 class="finale-text">CREATIVE POINT</h1>
                    <h1 class="finale-text">CREATIVE POINT</h1>
                    <h1 class="finale-text">CREATIVE POINT</h1>
                    <h1 class="finale-text">CREATIVE POINT</h1>
                </div>
            </div>
            <div class="container">
                <div class="contact-grid">
                    <div class="contact-info" data-gsap="fade-right">
                        <h2 class="contact-title">Start a New<br>Creative Journey</h2>
                        <p class="contact-subtitle">We are here to listen to your ideas and turn them into an impactful visual strategy. Contact us today.</p>
                        
                        <div class="contact-details">
                            <div class="contact-item">
                                <i class="ri-phone-line"></i>
                                <div>
                                    <span>Call Us</span>
                                    <p dir="ltr">+966 56 839 49 45</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="ri-mail-line"></i>
                                <div>
                                    <span>Email</span>
                                    <p>info@cpoint-sa.com</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <i class="ri-map-pin-line"></i>
                                <div>
                                    <span>Location</span>
                                    <p>Riyadh, Saudi Arabia</p>
                                </div>
                            </div>
                        </div>

                        <div class="social-links">
                            <a href="#"><i class="ri-instagram-line"></i></a>
                            <a href="#"><i class="ri-twitter-x-line"></i></a>
                            <a href="#"><i class="ri-linkedin-box-line"></i></a>
                        </div>
                    </div>

                    <div class="contact-form-wrapper" data-gsap="fade-left">
                        <form action="/contact" method="POST" class="contact-form">
                            <div class="form-group">
                                <input type="text" name="name" placeholder="Full Name" required>
                            </div>
                            <div class="form-group">
                                <input type="email" name="email" placeholder="Email Address" required>
                            </div>
                            <div class="form-group">
                                <input type="tel" name="phone" placeholder="Phone Number">
                            </div>
                            <div class="form-group">
                                <select name="service">
                                    <option value="" disabled selected>Select Service</option>
                                    <option value="branding">Branding</option>
                                    <option value="marketing">Digital Marketing</option>
                                    <option value="web">Web Development</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea name="message" rows="5" placeholder="Project Details" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn">
                                <span>Send Request</span>
                                <i class="ri-send-plane-fill"></i>
                            </button>
                        </form>

                        <div id="contact-success" style="display: none; margin-top: 20px; padding: 15px; background: #222; border: 1px solid #fff; border-radius: 10px; color: #fff; text-align: center;">
                            <i class="ri-checkbox-circle-line" style="font-size: 1.5rem; vertical-align: middle; margin-right: 10px;"></i>
                            Your request has been sent successfully! We will contact you soon.
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Check for success/error query params
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('success')) {
            document.getElementById('contact-success').style.display = 'block';
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) contactForm.style.display = 'none';
        }
    </script>

    <!-- Page Specific Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
    <script src="/js/hero-animation.js?v=<%= assetVersion %>" defer></script>
    <script src="/js/journey-animation.js?v=<%= assetVersion %>" defer></script>

    <!-- Slider Config Injection -->
    <script id="slider-config-data" type="application/json">
        <%- JSON.stringify({
            effect: (seo && seo.sliderEffect) ? seo.sliderEffect : "slide",
            autoplay: (seo && seo.sliderAutoplay) ? true : false,
            autoplayDelay: (seo && seo.sliderAutoplayDelay) ? seo.sliderAutoplayDelay : 3000,
            slidesPerView: (seo && seo.sliderSlidesPerView) ? seo.sliderSlidesPerView : 3,
            spaceBetween: (seo && seo.sliderSpaceBetween) ? seo.sliderSpaceBetween : 30
        }) %>
    </script>
    <%- include('partials/footer', { isEn: isEn }) %>
