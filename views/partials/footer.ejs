    </main>

    <section class="grand-footer">
        <div class="marquee-wrapper">
            <div class="marquee-content">
                <h1 class="finale-text"><%= typeof isEn !== 'undefined' && isEn ? 'CREATIVE POINT' : 'لم ينتهي الإبداع' %></h1>
                <h1 class="finale-text"><%= typeof isEn !== 'undefined' && isEn ? 'CREATIVE POINT' : 'لم ينتهي الإبداع' %></h1>
                <h1 class="finale-text"><%= typeof isEn !== 'undefined' && isEn ? 'CREATIVE POINT' : 'لم ينتهي الإبداع' %></h1>
                <h1 class="finale-text"><%= typeof isEn !== 'undefined' && isEn ? 'CREATIVE POINT' : 'لم ينتهي الإبداع' %></h1>
            </div>
        </div>
        <div class="container">
            <div class="footer-shell">
                <div class="footer-top">
                    <div class="footer-brand">
                        <div class="footer-logo">
                            <img src="/210.png" alt="Creative Point Logo" class="footer-logo-img">
                        </div>
                        <div class="footer-brand-text">
                            <p class="footer-title"><%= typeof isEn !== 'undefined' && isEn ? 'Creative Point Agency' : 'وكالة نقطة إبداعية' %></p>
                            <p class="footer-subtitle">
                                <%= typeof isEn !== 'undefined' && isEn
                                    ? 'Design, strategy and digital experiences from a single point of impact.'
                                    : 'تصميم واستراتيجية وتجارب رقمية تنطلق من نقطة تأثير واحدة.' %>
                            </p>
                        </div>
                    </div>
                    <div class="footer-nav">
                        <h4 class="footer-nav-title"><%= typeof isEn !== 'undefined' && isEn ? 'Navigate' : 'تصفح' %></h4>
                        <div class="footer-nav-links">
                            <% if(typeof isEn !== 'undefined' && isEn) { %>
                                <a href="/en#journey">Journey</a>
                                <a href="/en#services">Services</a>
                                <a href="/en/portfolio">Our Work</a>
                                <a href="/en#blog">Blog</a>
                                <a href="/en#contact">Contact</a>
                            <% } else { %>
                                <a href="/#journey">رحلتنا</a>
                                <a href="/#services">خدماتنا</a>
                                <a href="/portfolio">أعمالنا</a>
                                <a href="/#blog">المدونة</a>
                                <a href="/#contact">تواصل معنا</a>
                            <% } %>
                        </div>
                    </div>
                    <div class="footer-meta">
                        <h4 class="footer-nav-title"><%= typeof isEn !== 'undefined' && isEn ? 'Stay Connected' : 'ابق على تواصل' %></h4>
                        <div class="footer-contact">
                            <p>
                                <span><i class="ri-phone-line"></i></span>
                                <span dir="ltr">+966 56 839 49 45</span>
                            </p>
                            <p>
                                <span><i class="ri-mail-line"></i></span>
                                <span>info@cpoint-sa.com</span>
                            </p>
                        </div>
                        <div class="footer-lang-social">
                            <div class="footer-links">
                                <% if(typeof isEn !== 'undefined' && isEn) { %>
                                    <a href="/">العربية</a>
                                <% } else { %>
                                    <a href="/en">English</a>
                                <% } %>
                            </div>
                            <div class="footer-social">
                                <a href="#"><i class="ri-instagram-line"></i></a>
                                <a href="#"><i class="ri-twitter-x-line"></i></a>
                                <a href="#"><i class="ri-linkedin-box-line"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; <%= new Date().getFullYear() %> Creative Point. <%= typeof isEn !== 'undefined' && isEn ? 'All rights reserved.' : 'جميع الحقوق محفوظة.' %></p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p class="footer-mini-copy">&copy; <%= new Date().getFullYear() %> Creative Point. <%= typeof isEn !== 'undefined' && isEn ? 'All rights reserved.' : 'جميع الحقوق محفوظة.' %></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
    (function() {
        function removePreloader() {
            try {
                var el = document.getElementById('cpoint-preloader');
                if (!el || el.classList.contains('hidden')) return;
                el.classList.add('hidden');
            } catch (e) {}
        }
        function waitForScrollReady(ScrollTrigger) {
            var doc = document;
            var start = Date.now();
            var MAX_WAIT = 8000;
            var required = [];
            if (doc.querySelector('.hero-sticky-section')) required.push('hero');
            if (doc.querySelector('.journey-scroll-section')) required.push('journey');
            if (doc.querySelector('.services-horizontal-section')) required.push('services');
            var mediaReady = false;
            (function() {
                var nodes = doc.querySelectorAll('.hero-sticky-section img, .hero-sticky-section video, .services-horizontal-section img, .portfolio-section img, .blog-home-section img');
                var total = 0;
                var loaded = 0;
                function done() {
                    loaded++;
                    if (loaded >= total) mediaReady = true;
                }
                nodes.forEach(function(node) {
                    if (total >= 20) return;
                    var tag = node.tagName;
                    if (tag === 'IMG') {
                        if (node.complete && node.naturalWidth > 0) return;
                        total++;
                        node.addEventListener('load', done, { once: true });
                        node.addEventListener('error', done, { once: true });
                    } else if (tag === 'VIDEO') {
                        if (node.readyState && node.readyState >= 2) return;
                        total++;
                        node.addEventListener('loadeddata', done, { once: true });
                        node.addEventListener('error', done, { once: true });
                    }
                });
                if (!total) mediaReady = true;
            })();
            function isReady() {
                if (!required.length && mediaReady) return true;
                var state = window.__CP_READY || {};
                for (var i = 0; i < required.length; i++) {
                    if (!state[required[i]]) return false;
                }
                if (!mediaReady) return false;
                return true;
            }
            function check() {
                if (isReady() || (Date.now() - start) > MAX_WAIT) {
                    if (ScrollTrigger && ScrollTrigger.refresh) {
                        try { ScrollTrigger.refresh(); } catch (e) {}
                    }
                    removePreloader();
                } else {
                    setTimeout(check, 120);
                }
            }
            check();
        }
        window.addEventListener('load', function() {
            if (window.safeScrollTrigger) {
                window.safeScrollTrigger(function(gsap, ScrollTrigger) {
                    waitForScrollReady(ScrollTrigger);
                });
            } else {
                waitForScrollReady(window.ScrollTrigger || null);
            }
        });
    })();
    </script>
    <script src="/js/main.js?v=<%= assetVersion %>" defer></script>
    <script src="/js/menu.js?v=<%= assetVersion %>" defer></script>
    
    <!-- Custom Scripts Footer -->
    <% if (typeof globalSeo !== 'undefined' && globalSeo && globalSeo.customScriptsFooter) { %>
        <%- globalSeo.customScriptsFooter %>
    <% } %>
    <script>
    (function () {
      var THRESHOLD = 3000;
      function onLoad(fn){ if(document.readyState==='complete'){fn();} else {window.addEventListener('load', fn, {once:true});}}
      function ms(n){ return Math.round(n || 0); }
      onLoad(function(){
        try{
          var nav = (performance.getEntriesByType && performance.getEntriesByType('navigation')[0]) || null;
          var total,dns,connect,tls,ttfb,download,dom,render;
          if(nav){
            total = nav.loadEventEnd - nav.startTime;
            dns = nav.domainLookupEnd - nav.domainLookupStart;
            connect = nav.connectEnd - nav.connectStart;
            tls = nav.secureConnectionStart>0 ? (nav.connectEnd - nav.secureConnectionStart) : 0;
            ttfb = nav.responseStart - nav.requestStart;
            download = nav.responseEnd - nav.responseStart;
            dom = (nav.domContentLoadedEventEnd || nav.domComplete) - nav.responseEnd;
            render = nav.loadEventEnd - (nav.domContentLoadedEventEnd || nav.domComplete);
          } else if (performance.timing) {
            var t = performance.timing;
            total = t.loadEventEnd - t.navigationStart;
            dns = t.domainLookupEnd - t.domainLookupStart;
            connect = t.connectEnd - t.connectStart;
            tls = t.secureConnectionStart ? (t.connectEnd - t.secureConnectionStart) : 0;
            ttfb = t.responseStart - t.requestStart;
            download = t.responseEnd - t.responseStart;
            dom = (t.domContentLoadedEventEnd || t.domComplete) - t.responseEnd;
            render = t.loadEventEnd - (t.domContentLoadedEventEnd || t.domComplete);
          }
          var resources = (performance.getEntriesByType && performance.getEntriesByType('resource')) || [];
          var topSlow = resources.filter(function(e){return e.duration>300;}).sort(function(a,b){return b.duration-a.duration;}).slice(0,5).map(function(e){return {type:e.initiatorType,name:e.name,dur:ms(e.duration)};});
          if(total > THRESHOLD){
            var origin = location.origin;
            var third = resources.filter(function(e){return e.duration>500 && e.name.indexOf(origin)!==0;}).sort(function(a,b){return b.duration-a.duration;})[0];
            var imgBig = resources.filter(function(e){return e.initiatorType==='img';}).sort(function(a,b){return b.duration-a.duration;})[0];
            var scriptBig = resources.filter(function(e){return e.initiatorType==='script';}).sort(function(a,b){return b.duration-a.duration;})[0];
            console.group('%cSlow navigation '+ms(total)+'ms '+location.pathname,'color:#d00;font-weight:bold');
            console.table([
              {metric:'DNS',ms:ms(dns)},
              {metric:'Connect',ms:ms(connect)},
              {metric:'TLS',ms:ms(tls)},
              {metric:'TTFB',ms:ms(ttfb)},
              {metric:'Download',ms:ms(download)},
              {metric:'DOM',ms:ms(dom)},
              {metric:'Render',ms:ms(render)}
            ]);
            if(topSlow.length) console.log('Top slow resources (>=300ms):', topSlow);
            if(third) console.warn('3rd-party slow', third);
            if(imgBig) console.warn('Slow image', imgBig);
            if(scriptBig) console.warn('Slow script', scriptBig);
            var hints=[];
            if(ttfb>1000) hints.push('TTFB مرتفع: راجع قاعدة البيانات والميكروكاش');
            if(dom>1200) hints.push('DOM ثقيل: خفّض JS/DOM');
            if(download>1200) hints.push('تحميل ثقيل: قلل حجم HTML/الصور');
            if(imgBig && imgBig.dur>800) hints.push('الصورة بطيئة: ضغط/أبعاد/lazy');
            if(third && third.dur>800) hints.push('طرف ثالث بطيء: حمّل defer أو قلل الاعتماد');
            console.info('Hints:', hints.join(' | ') || 'لا مؤشرات خطيرة');
            console.groupEnd();
          } else {
            console.debug('Navigation '+location.pathname+' total '+ms(total)+'ms');
          }
        }catch(e){ console.debug('perf monitor error', e); }
      });
    })();
    </script>
</body>
</html>
