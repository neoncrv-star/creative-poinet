<%- include('partials/header') %>

<!-- Page Specific CSS (loaded asynchronously to avoid render-blocking) -->
<link rel="preload" href="/css/hero.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/journey.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/services.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/css/portfolio-slider.css?v=<%= assetVersion %>" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
    <link rel="stylesheet" href="/css/hero.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/journey.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/services.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="/css/portfolio-slider.css?v=<%= assetVersion %>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    </noscript>

<style>
    :root {
        --service-overlay-opacity: <%= (globalSeo && globalSeo.serviceOverlayOpacity !== undefined) ? globalSeo.serviceOverlayOpacity : 0.8 %>;
        --service-image-brightness: <%= (globalSeo && globalSeo.serviceImageBrightness !== undefined) ? globalSeo.serviceImageBrightness : 0.5 %>;
        --slider-height: <%= (globalSeo && globalSeo.sliderHeight) ? globalSeo.sliderHeight : '500px' %>;
    }
    
    .portfolio-swiper {
        height: var(--slider-height) !important;
    }
    
    .project-card {
        height: 100% !important;
    }

    .project-card img, .project-card video {
        height: 100% !important;
        object-fit: cover !important;
    }

</style>

<main>

    <!-- =========================
         Sticky Mask Hero Section
    ========================== -->
    <section class="hero-sticky-section">
        <div class="hero-sticky-wrapper">
            
            <!-- The Mask/Reveal Container -->
            <div class="hero-mask-container">
                <div class="hero-video-wrapper">
                    <% 
                    let heroVideoSrc = seo && seo.heroVideoUrl ? seo.heroVideoUrl : 'https://cdn.coverr.co/videos/coverr-red-smoke-5374/1080p.mp4';
                    %>
                    <video class="hero-video" playsinline muted loop autoplay preload="metadata" poster="/210.png">
                        <source src="<%= heroVideoSrc %>" type="video/mp4">
                    </video>
                    <div class="hero-video-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 2;"></div>
                </div>
                
                <!-- Content revealed inside the video -->
                <div class="hero-content-overlay">
                    <h1 class="hero-title">كل إبداع يبدأ<br>بنقطة</h1>
                    <p class="hero-subtitle">
                        هذا الشعار لا يختصر رؤيتنا فحسب، بل يعكس منهجنا
                        الاستراتيجي في بناء علامات لا تُنسى.
                    </p>
                    <a href="#journey" class="hero-btn">اكتشف الرحلة</a>
                </div>
            </div>

            <!-- Initial Elements (Visible before scroll) -->
            <div class="hero-initial-point">
                <div class="dots-wrapper">
                    <div class="point-dot-white"></div>
                    <div class="point-dot-red"></div>
                </div>
                <div class="hero-initial-text">ابداع يبدأ بنقطة</div>
            </div>

            <div class="scroll-mouse-icon">
                <div class="mouse-shape">
                    <div class="mouse-wheel"></div>
                </div>
                <span class="scroll-text">تصفح</span>
            </div>
            
        </div>
    </section>

    <!-- Journey Section -->
    <section id="journey" class="journey-scroll-section">
        <div class="journey-container" style="text-align: center;">
            <p class="journey-eyebrow" style="text-align: center;">شركة وكالة نقطة إبداعية</p>
            <div class="journey-text-content" style="text-align: center;">
                <span class="journey-line">وكالة إبداعية وتسويقية متكاملة الخدمات</span>
                <span class="journey-line">ترتكز على فكرة واضحة قبل البدء بأي تنفيذ</span>
                <span class="journey-line">في عالم مزدحم بالضجيج البصري والإعلاني</span>
                <span class="journey-line">لا نبدأ بالزخرفة</span>
                <span class="journey-line">بل نبدأ بقرار استراتيجي ذكي وموحد</span>
                <span class="journey-line">من هذه النقطة، نعيد الإبداع إلى جوهره الحقيقي</span>
                <span class="journey-line">هوية بصرية راسخة</span>
                <span class="journey-line">حلول تصميم احترافية</span>
                <span class="journey-line">وتجهيزات عالية الجودة</span>
            </div>
        </div>
    </section>

    <section id="services" class="services-horizontal-section">
        <div class="services-horizontal-wrapper">
            <div class="services-header">
                <div class="services-header-main">
                    <p class="services-eyebrow">الخدمات</p>
                    <h2 class="services-title">ما الذي نقدمه؟</h2>
                    <p class="services-subtitle">
                        حلول تصميم، هوية، وتجهيز معارض مبنية على قرار استراتيجي واحد واضح.
                    </p>
                </div>
                <p class="services-header-note">
                    كل خدمة هنا تمثل نقطة تركيز واضحة: من بناء الهوية، مرورًا بالتصاميم الإعلانية،
                    وصولًا إلى التجهيزات الميدانية المتكاملة.
                </p>
            </div>

            <div class="services-panel-container">
                <% if (services && services.length > 0) { %>
                    <% services.forEach((service, index) => { %>
                        <article class="service-card" id="service-<%= index + 1 %>">
                            <div class="service-card-header">
                                <h3 class="service-card-title">
                                    <%= service.title_ar || service.title_en || service.title || 'خدمة' %>
                                </h3>
                                <span class="service-card-index">
                                    <%= (index + 1).toString().padStart(2, '0') %>
                                </span>
                            </div>
                            <% if (service.description_ar || service.description_en) { %>
                                <p class="service-card-desc">
                                    <%= service.description_ar || service.description_en %>
                                </p>
                            <% } %>
                            <ul class="service-card-tags">
                                <% if (service.tag1_ar || service.tag1_en) { %>
                                    <li class="service-card-tag"><%= service.tag1_ar || service.tag1_en %></li>
                                <% } %>
                                <% if (service.tag2_ar || service.tag2_en) { %>
                                    <li class="service-card-tag"><%= service.tag2_ar || service.tag2_en %></li>
                                <% } %>
                                <% if (service.tag3_ar || service.tag3_en) { %>
                                    <li class="service-card-tag"><%= service.tag3_ar || service.tag3_en %></li>
                                <% } %>
                            </ul>
                            <div class="service-card-footer">
                                <div class="service-card-marker">•</div>
                            </div>
                        </article>
                    <% }); %>
                <% } else { %>
                    <article class="service-card">
                        <h3 class="service-card-title">الهوية البصرية</h3>
                        <p class="service-card-desc">
                            نصنع هوية متكاملة تجعل العلامة واضحة، ثابتة، وسهلة التذكر.
                        </p>
                        <ul class="service-card-tags">
                            <li class="service-card-tag">شعار</li>
                            <li class="service-card-tag">كتيب هوية</li>
                            <li class="service-card-tag">تطبيقات مطبوعة</li>
                        </ul>
                    </article>

                    <article class="service-card">
                        <h3 class="service-card-title">التصميم الإعلاني</h3>
                        <p class="service-card-desc">
                            تحويل الرسائل التسويقية إلى مواد بصرية مباشرة وسهلة الفهم.
                        </p>
                        <ul class="service-card-tags">
                            <li class="service-card-tag">سوشيال ميديا</li>
                            <li class="service-card-tag">أصول حملات</li>
                            <li class="service-card-tag">مواد مطبوعة</li>
                        </ul>
                    </article>

                    <article class="service-card">
                        <h3 class="service-card-title">المعارض والفعاليات</h3>
                        <p class="service-card-desc">
                            تجهيز أجنحة ومعارض متكاملة تعكس هوية العلامة وتجربتها.
                        </p>
                        <ul class="service-card-tags">
                            <li class="service-card-tag">تصميم مساحات</li>
                            <li class="service-card-tag">تصنيع</li>
                            <li class="service-card-tag">إدارة التنفيذ</li>
                        </ul>
                    </article>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Portfolio Slider Section -->
    <section id="portfolio" class="portfolio-section">
        <div class="container">
            <div class="portfolio-header" data-gsap="fade-up" style="text-align: center;">
                <h2 class="portfolio-title">آخر المشاريع</h2>
                <p style="text-align: center;">نحول الأفكار إلى واقع ملموس... شاهد أعمالنا</p>
            </div>

            <div class="portfolio-container" data-gsap="fade-up">
                <button class="portfolio-nav-btn prev-btn">
                    <i class="ri-arrow-right-line"></i>
                </button>
                <button class="portfolio-nav-btn next-btn">
                    <i class="ri-arrow-left-line"></i>
                </button> 
    
                <div         class="swiper portfolio-swiper">
                    <div class="swiper-wrapper">
                        <% if (projects && projects.length > 0) { %>
                            <% projects.forEach(project => { %>
                                <div class="swiper-slide">
                                    <div class="project-card">
                                        <% if (project.image && (project.image.endsWith('.mp4') || project.image.endsWith('.webm'))) { %>
                                            <video src="<%= project.image %>" muted loop playsinline autoplay></video>
                                        <% } else if (project.image) { %>
                                            <img src="<%= project.image %>" alt="<%= project.title_ar || project.title %>" width="1200" height="800" loading="lazy" decoding="async">
                                        <% } else { %>
                                            <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Project Placeholder" width="800" height="600" loading="lazy" decoding="async">
                                        <% } %>
                                        
                                        <div class="project-overlay">
                                            <div class="project-info">
                                                <h3><%= project.title_ar || project.title %></h3>
                                                <p><%= project.description_ar || project.description %></p>
                                                <a href="<%= project.externalLink || '/portfolio/' + project.id %>" class="project-link" <%= project.externalLink ? 'target="_blank"' : '' %>>
                                                    <span>عرض المشروع</span>
                                                    <i class="ri-arrow-left-line"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        <% } else { %>
                            <!-- Fallback static projects -->
                            <% for(let i=1; i<=6; i++) { %>
                                <div class="swiper-slide">
                                    <div class="project-card">
                                        <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Project <%= i %>">
                                        <div class="project-overlay">
                                            <div class="project-info">
                                                <h3>مشروع إبداعي <%= i %></h3>
                                                <p>وصف مختصر للمشروع وكيف ساعدنا العميل في تحقيق أهدافه.</p>
                                                <a href="#" class="project-link">
                                                    <span>عرض المشروع</span>
                                                    <i class="ri-arrow-left-line"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <% } %>
                        <% } %>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Partners Section -->
    <section id="partners" class="partners-section">
        <div class="container">
            <div class="partners-header" data-gsap="fade-up">
                <h2 class="partners-title">نحن فخورون بعملنا، وأكثر فخراً بالشراكات التي تعاونا معهم.</h2>
            </div>
            <div class="partners-grid">
                <% if (partners && partners.length > 0) { %>
                    <% partners.forEach(partner => { %>
                        <div class="partner-item" data-gsap="fade-up">
                            <img src="<%= partner.logo %>" alt="<%= partner.name %>" title="<%= partner.name %>" loading="lazy" decoding="async" width="200" height="80">
                        </div>
                    <% }) %>
                <% } else { %>
                    <div class="partner-item" data-gsap="fade-up">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Saudi_Aramco_logo.svg/1200px-Saudi_Aramco_logo.svg.png" alt="Saudi Aramco" loading="lazy" decoding="async" width="200" height="80">
                    </div>
                    <div class="partner-item" data-gsap="fade-up">
                        <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/8/82/Misk_Foundation_logo.svg/1200px-Misk_Foundation_logo.svg.png" alt="Misk" loading="lazy" decoding="async" width="200" height="80">
                    </div>
                    <div class="partner-item" data-gsap="fade-up">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/ROSHN_Logo.svg/1200px-ROSHN_Logo.svg.png" alt="ROSHN" loading="lazy" decoding="async" width="200" height="80">
                    </div>
                    <div class="partner-item" data-gsap="fade-up">
                        <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/e/e0/Diriyah_Gate_Development_Authority_logo.svg/1200px-Diriyah_Gate_Development_Authority_logo.svg.png" alt="DGDA" loading="lazy" decoding="async" width="200" height="80">
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="blog-home-section">
        <div class="container">
            <div class="blog-section-inner" data-gsap="fade-up">
                <div class="section-header" style="text-align: center; margin-bottom: 3rem;">
                    <h2 class="section-title" style="font-size: 2.5rem; margin-bottom: 1rem;">آخر المقالات</h2>
                    <p style="color: #888; font-size: 1.1rem;">أفكار ورؤى في عالم التصميم والتكنولوجيا</p>
                </div>
                
                <div class="blog-grid">
                    <% if (posts && posts.length > 0) { %>
                        <% posts.forEach(post => { %>
                            <article class="blog-card">
                                <% if (post.image) { %>
                                    <div class="blog-image">
                                        <img src="<%= post.image %>" alt="<%= post.title %>">
                                    </div>
                                <% } %>
                                <div class="blog-content">
                                    <span class="blog-date"><%= post.date %></span>
                                    <h3><%= post.title %></h3>
                                    <p class="blog-excerpt"><%= post.excerpt %></p>
                                    <a href="/blog/<%= post.id %>" class="read-more">
                                        <span>اقرأ المزيد</span>
                                        <i class="ri-arrow-left-line"></i>
                                    </a>
                                </div>
                            </article>
                        <% }) %>
                    <% } else { %>
                        <div style="grid-column: 1/-1; text-align: center; padding: 50px; background: #0a0a0a; border-radius: 20px; border: 1px solid #1a1a1a;">
                            <p style="color: #666;">لا توجد مقالات حالياً.</p>
                        </div>
                    <% } %>
                </div>
                
                <div class="view-all-container">
                    <a href="/blog" class="view-all-btn">مشاهدة جميع المقالات</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="marquee-wrapper contact-marquee">
            <div class="marquee-content">
                <h1 class="finale-text">لم ينتهي الإبداع</h1>
                <h1 class="finale-text">لم ينتهي الإبداع</h1>
                <h1 class="finale-text">لم ينتهي الإبداع</h1>
                <h1 class="finale-text">لم ينتهي الإبداع</h1>
            </div>
        </div>
        <div class="container">
            <div class="contact-grid">
                <div class="contact-info" data-gsap="fade-left">
                    <h2 class="contact-title">لنبدأ رحلة<br>إبداعية جديدة</h2>
                    <p class="contact-subtitle">نحن هنا لنسمع أفكارك ونحولها إلى استراتيجية بصرية مؤثرة. تواصل معنا اليوم.</p>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <i class="ri-phone-line"></i>
                            <div>
                                <span>اتصل بنا</span>
                                <p dir="ltr">+966 56 839 49 45</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="ri-mail-line"></i>
                            <div>
                                <span>البريد الإلكتروني</span>
                                <p>info@cpoint-sa.com</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="ri-map-pin-line"></i>
                            <div>
                                <span>الموقع</span>
                                <p>المملكة العربية السعودية، الرياض</p>
                            </div>
                        </div>
                    </div>

                    <div class="social-links">
                        <a href="#"><i class="ri-instagram-line"></i></a>
                        <a href="#"><i class="ri-twitter-x-line"></i></a>
                        <a href="#"><i class="ri-linkedin-box-line"></i></a>
                    </div>
                </div>

                <div class="contact-form-wrapper" data-gsap="fade-right">
                    <form action="/contact" method="POST" class="contact-form">
                        <div class="form-group">
                            <input type="text" name="name" placeholder="الاسم الكامل" required>
                        </div>
                        <div class="form-group">
                            <input type="email" name="email" placeholder="البريد الإلكتروني" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="رقم الجوال">
                        </div>
                        <div class="form-group">
                            <select name="service">
                                <option value="" disabled selected>نوع الخدمة المطلوبة</option>
                                <option value="branding">الهوية البصرية</option>
                                <option value="marketing">التسويق الرقمي</option>
                                <option value="web">تطوير المواقع</option>
                                <option value="other">أخرى</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <textarea name="message" rows="5" placeholder="تفاصيل المشروع" required></textarea>
                        </div>
                        <button type="submit" class="submit-btn">
                            <span>إرسال الطلب</span>
                            <i class="ri-send-plane-fill"></i>
                        </button>
                    </form>
                    
                    <div id="contact-success" style="display: none; margin-top: 20px; padding: 15px; background: #222; border: 1px solid #fff; border-radius: 10px; color: #fff; text-align: center;">
                        <i class="ri-checkbox-circle-line" style="font-size: 1.5rem; vertical-align: middle; margin-left: 10px;"></i>
                        تم إرسال طلبك بنجاح! سنتواصل معك قريباً.
                    </div>
                </div>
            </div>
        </div>
    </section>
  
    <script>
        // Check for success/error query params
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('success')) {
            document.getElementById('contact-success').style.display = 'block';
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) contactForm.style.display = 'none';
        }
    </script>

</main>

    <!-- Page Specific Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
    <script src="/js/hero-animation.js?v=<%= assetVersion %>" defer></script>
    <script src="/js/journey-animation.js?v=<%= assetVersion %>" defer></script>
    <script  src="/js/services-animation.js?v=<%= assetVersion %>" defer></script>
 
    <!-- Slider Config Injection -->
    <script id="slider-config-data" type="application/json">
        <%- JSON.stringify({
            effect: (seo && seo.sliderEffect) ? seo.sliderEffect : "slide",
            autoplay: (seo && seo.sliderAutoplay) ? true : false,
            autoplayDelay: (seo && seo.sliderAutoplayDelay) ? seo.sliderAutoplayDelay : 3000,
            slidesPerView: (seo && seo.sliderSlidesPerView) ? seo.sliderSlidesPerView : 3,
            spaceBetween: (seo && seo.sliderSpaceBetween) ? seo.sliderSpaceBetween : 30
        }) %>
    </script> 
    <%- include('partials/footer') %>
 
